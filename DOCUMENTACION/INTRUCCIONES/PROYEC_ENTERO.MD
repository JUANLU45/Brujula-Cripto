DOCUMENT filename="PROYEC_PARTE1.MD">
üèóÔ∏è PROYECTO: Br√∫jula Cripto - Arquitectura Global Unificada (VERSI√ìN FINAL DE PRODUCCI√ìN)

1. Filosof√≠a del Proyecto
Este proyecto se construye sobre cinco pilares innegociables:

Estructura Centralizada: Un √∫nico repositorio (monorepo) para todo el c√≥digo, gestionado con pnpm workspaces, para forzar la compartici√≥n de l√≥gica y tipos.
Consistencia Forzada: Herramientas de linting (ESLint) y formato (Prettier) con reglas estrictas para que todo el c√≥digo parezca escrito por una sola persona.
Escalabilidad por Dise√±o: Arquitectura desacoplada que permite que cada parte del sistema crezca de forma independiente.
Dualidad Funcional: Una plataforma con una cara p√∫blica para los usuarios y un potente panel de administraci√≥n seguro para la gesti√≥n interna.
Experiencia de Usuario Universal: Soporte nativo para m√∫ltiples idiomas (espa√±ol e ingl√©s), modos de visualizaci√≥n (claro y oscuro) y un dise√±o 100% adaptable a dispositivos m√≥viles (Mobile-First).

2. Estructura del Monorepo
text/br√∫jula-cripto/
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îú‚îÄ‚îÄ app/              # El frontend Next.js (p√∫blico + admin)
‚îÇ   ‚îú‚îÄ‚îÄ functions/        # El backend (Cloud Functions)
‚îÇ   ‚îú‚îÄ‚îÄ microservice-ia/  # El microservicio de contenido
‚îÇ   ‚îî‚îÄ‚îÄ types/            # Paquete COMPARTIDO de tipos de TypeScript
‚îú‚îÄ‚îÄ .eslintrc.json        # Reglas de linting para TODO el proyecto
‚îú‚îÄ‚îÄ .prettierrc           # Reglas de formato para TODO el proyecto
‚îî‚îÄ‚îÄ pnpm-workspace.yaml   # Define los paquetes del monorepo
Ventaja Cr√≠tica: El paquete packages/types es la √∫nica fuente de verdad para los modelos de datos (IArticle, IUser). Todos los dem√°s paquetes lo importan. Esto elimina por completo los errores de inconsistencia de datos entre el frontend, el backend y los servicios.
3. Mejoras Implementadas para Robustez y Producci√≥n 2025
A. Proceso de Actualizaci√≥n para packages/types

Descripci√≥n: Para mitigar rigidez, se establece un proceso estricto: Cualquier actualizaci√≥n a tipos (ej. a√±adir campos) requiere un changelog en /packages/types/CHANGELOG.md, pruebas automatizadas con Jest para validar compatibilidad retroactiva, y revisi√≥n por pares antes de merge. Esto se integra en el flujo de trabajo sin alterar tipos existentes.

B. Integraci√≥n de CI/CD

Descripci√≥n: Se a√±ade pipeline de CI/CD usando Google Cloud Build para automatizar pruebas, linting (ESLint), formato (Prettier), y despliegues. Triggers en pushes a main: Ejecuta pnpm test, pnpm lint, y despliega a Cloud Run/Functions si pasa. Configuraci√≥n en cloudbuild.yaml en ra√≠z del monorepo.

C. Mitigaci√≥n de Vendor Lock-in

Descripci√≥n: Se eval√∫an alternativas modulares: Para Firestore, preparar abstracciones con interfaces en packages/types que permitan swap a DynamoDB si necesario. Para Cloud Run, usar contenedores Docker est√°ndar para portabilidad a ECS. No se altera dependencia actual, solo se a√±ade secci√≥n de evaluaci√≥n en documentaci√≥n.

D. Adaptaci√≥n al Modelo de Monetizaci√≥n por Horas

Descripci√≥n: El sistema de monetizaci√≥n se actualiza a un modelo de pago por uso basado en cr√©ditos de tiempo (usageCreditsInSeconds). Esto se integra en todos los paquetes mediante tipos compartidos en packages/types, asegurando consistencia. Las abstracciones permiten futuras expansiones sin romper la arquitectura existente.
</DOCUMENT>

<DOCUMENT filename="PROYEC_PARTE2.MD">
# üü¶ PROYEC_PARTE2_FINAL_V3.MD (Frontend)

## 1. Stack Tecnol√≥gico (Sin cambios)

- **Framework:** Next.js 14+ (App Router)
- **Lenguaje:** TypeScript (`strict` mode)
- **Estilos:** Tailwind CSS
- ... (resto de tecnolog√≠as)

## 2. Principios de Dise√±o (Sin cambios)

- **Mobile-First** y **Accesibilidad (a11y)**.

## 3. Estructura de Carpetas y Nombres de Componentes (`packages/app`) - **ACTUALIZADO**

```
/packages/app/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ [locale]/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (main)/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx          # P√°gina de Inicio (Home)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ blog/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [slug]/page.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recuperacion/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx      # **Herramienta 1: M√≥dulo de Diagn√≥stico**
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ password/page.tsx # **Herramienta 2: Recuperaci√≥n de Contrase√±a**
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ herramientas/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tracker/page.tsx  # **Herramienta 4: Rastreador de Transacciones**
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ servicios/page.tsx # **Herramienta 5: Directorio de Servicios**
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contacto/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # **P√°gina de Contacto**
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seguridad/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # **Herramienta 3: Base de Conocimiento (Blog filtrado)**
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ registro/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # **Registro de Usuario**
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # **Inicio de Sesi√≥n**
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recuperar-password/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # **Recuperaci√≥n de Contrase√±a de Cuenta**
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ suscripcion/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # **P√°gina de Precios y Suscripci√≥n**
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ legal/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ aviso-legal/page.tsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ privacidad/page.tsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ terminos/page.tsx
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ descargo-responsabilidad/page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (dashboard)/         # **Nueva Ruta Protegida**
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx       # Layout para √°rea protegida
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cuenta/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx     # **Panel de Control del Usuario**
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ not-found.tsx        # **P√°gina de Error 404**
...
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îî‚îÄ‚îÄ features/
‚îÇ       ‚îú‚îÄ‚îÄ admin/
‚îÇ       ‚îú‚îÄ‚îÄ recovery/
‚îÇ       ‚îú‚îÄ‚îÄ blog/           # ArticleCard.tsx, ArticleList.tsx, BlogSearchBar.tsx, PaginationControls.tsx
‚îÇ       ‚îú‚îÄ‚îÄ payments/
‚îÇ       ‚îú‚îÄ‚îÄ homepage/       # HomepageBanner.tsx, FeaturedPostsCarousel.tsx
‚îÇ       ‚îú‚îÄ‚îÄ tools/          # TransactionTracker.tsx, ServiceDirectory.tsx
‚îÇ       ‚îú‚îÄ‚îÄ contact/        # ContactForm.tsx
‚îÇ       ‚îú‚îÄ‚îÄ auth/           # **NUEVO** SignUpForm.tsx, SignInForm.tsx, PasswordResetForm.tsx
‚îÇ       ‚îú‚îÄ‚îÄ pricing/        # **NUEVO** PricingPage.tsx
‚îÇ       ‚îî‚îÄ‚îÄ dashboard/      # **NUEVO** UserDashboard.tsx
...
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ api.ts              # L√≥gica para llamar a backend y miniservicios
```

## 4. Mejoras Implementadas para Robustez y Producci√≥n 2025

### **A. Escalabilidad del `TransactionTracker`**

- **Descripci√≥n:** En `TransactionTracker.tsx`, a√±adir l√≥gica de reintentos con backoff exponencial para llamadas a APIs externas. Usar librer√≠a `retry-axios` en el frontend para manejar fallos, con m√°ximo 3 reintentos y delay inicial de 1s. No altera estructura existente.

### **B. Mapeo de Autenticaci√≥n con Google OAuth**

- **Descripci√≥n:** En `SignInForm.tsx`, aclarar mapeo: Al autenticar con Google, usar `firebase.auth().signInWithPopup(googleProvider)` y mapear `uid` directamente a `stripeCustomerId` en Firestore v√≠a hook post-login. A√±adir en documentaci√≥n de componente.

### **C. Feedback en Formularios**

- **Descripci√≥n:** En componentes como `SignUpForm.tsx`, `SignInForm.tsx`, `PasswordResetForm.tsx` y `ContactForm.tsx`, integrar mensajes de error localizados (ES/EN) usando `react-hook-form` con resolvers para validaciones como "email ya registrado" o "contrase√±a d√©bil". Estados de error visibles con Tailwind classes.

### **D. P√°gina del Blog (`/blog`)**

- **Componente Principal:** `BlogPage.tsx`
- **Estructura:** Banner superior con H1 ("Explora Nuestro Blog de Cripto Seguridad"), H2 ("Gu√≠as, Noticias y Consejos Expertos"), descripci√≥n llamativa ("Mantente al d√≠a con las mejores pr√°cticas en criptomonedas"). Barra de b√∫squeda (`BlogSearchBar.tsx`) para filtrar por t√≠tulo/tags/categor√≠as. Lista de tarjetas (`ArticleList.tsx`) con paginaci√≥n (`PaginationControls.tsx`). Cada tarjeta (`ArticleCard.tsx`) con imagen de portada, t√≠tulo, excerpt, tags clicables (enlazan a art√≠culos de misma tag/categor√≠a), botones de compartir en redes (usando Web Share API nativa para X, Telegram, etc.). Solo suscritos (`hasPremiumAccess: true`) pueden dar like (almacenado en Firestore) y enviar comentarios (moderados v√≠a admin).
- **SEO Enfocado:** Usar Next.js metadata API para metaetiquetas din√°micas por p√°gina, canonical links, structured data (JSON-LD para articles). Categor√≠as din√°micas gestionadas desde admin (`/admin/articles`).

### **E. P√°gina de Art√≠culo Individual (`/blog/[slug]` )**

- **Componente:** `ArticlePage.tsx`
- **Estructura:** Dise√±o limpio para lectura f√°cil (Tailwind prose), con H1 (t√≠tulo), meta info (autor, fecha, categor√≠a), contenido Markdown renderizado. Tags clicables (enlazan a lista de art√≠culos por tag). Flechas de navegaci√≥n para art√≠culo anterior/siguiente. Botones de compartir en redes (Web Share API). Solo suscritos pueden dar like y comentarios. Enlace a categor√≠a para ver m√°s art√≠culos relacionados.

### **F. Comparaci√≥n Interactiva en Suscripci√≥n (`CompetitorComparison.tsx` )**

- **Descripci√≥n:** En `/suscripcion/page.tsx`, a√±adir componente interactivo: Tabs para diferencias (privacidad, ecosistema, facilidad). Calculadora para costos: Input para monto recuperado, calcula 20% competidores vs fijo/hora...(truncated 3354 characters)...xto, imagen.

### **B. P√°gina de Diagn√≥stico Interactivo (`/recuperacion` )**

- **Componente:** `RecoveryWizard.tsx`.
- **Interacci√≥n:** Una serie de tarjetas con preguntas comunes, como "He perdido mi contrase√±a" (enlaza a `/recuperacion/password`).

### **C. P√°gina de Recuperaci√≥n de Contrase√±a (`/recuperacion/password` )**

- **Componente:** `WasmPasswordEngine.tsx`.
- **Interacci√≥n:** Formulario para introducir datos (ej. diccionarios), con niveles gratuito (limitado) y premium (ilimitado). Muestra progreso y resultados.

### **D. P√°gina de Gu√≠as de Seguridad (`/seguridad` )**

- **Componente:** `SecurityGuides.tsx`.
- **Interacci√≥n:** Lista filtrada del blog por categor√≠a "seguridad".

### **E. P√°gina de Rastreador de Transacciones (`/herramientas/tracker` )**

- **Componente:** `TransactionTracker.tsx`.
- **Interacci√≥n:** Formulario para introducir hash de transacci√≥n o direcci√≥n, muestra resultados detallados de APIs externas.

### **F. P√°gina de Directorio de Servicios (`/herramientas/servicios` )**

- **Componente:** `ServiceDirectory.tsx`.
- **Interacci√≥n:** Lista de servicios profesionales con filtros por especialidad.

### **G. P√°ginas Legales (`/legal/*` )**

*Estas p√°ginas son fundamentales y deben estar perfectamente redactadas.*

1. **Aviso Legal, Privacidad, T√©rminos y Condiciones:** P√°ginas de texto est√°tico con el contenido legal correspondiente.
2. **Descargo de Responsabilidad (`/legal/descargo-responsabilidad`):**
    - **Contenido:** Esta p√°gina contendr√° un texto **enorme y muy claro** explicando que Br√∫jula Cripto es una herramienta de software, que no garantiza la recuperaci√≥n, que no es un servicio de custodia, que no ofrece consejo financiero y que el uso de las herramientas es bajo la propia responsabilidad del usuario.
    - **Visibilidad:** El enlace a esta p√°gina estar√° en el footer y en cualquier lugar donde se ofrezca un servicio de pago o de riesgo.

### **H. P√°gina de Contacto (`/contacto` )**

- **Componente:** `ContactForm.tsx`.
- **Interacci√≥n:** Formulario para enviar nombre, email y mensaje, que se procesa a trav√©s de una Cloud Function.

### **I. P√°gina del Blog (`/blog` )**

- **Componente Principal:** `BlogPage.tsx`
- **Estructura:** Banner superior editable desde admin (foto, texto H1/H2, descripci√≥n). Barra de b√∫squeda para t√≠tulos/tags/categor√≠as. Lista paginada de tarjetas con sharing nativo, likes/comentarios solo para suscritos. Categor√≠as din√°micas editables desde admin.

### **J. P√°gina de Art√≠culo (`/blog/[slug]` )**

- **Componente:** `ArticlePage.tsx`
- **Estructura:** Contenido f√°cil de leer, tags clicables, flechas para navegaci√≥n, sharing nativo, likes/comentarios para suscritos.

### **K. P√°gina del Chatbot (`/chatbot` )**

- **Componente:** `ChatbotUI.tsx`
- **Estructura:** Interfaz espectacular con imagen de br√∫jula como logo, nombre "Br√∫jula". Conversaciones listadas, respuestas streaming, sugerencias, render components (tablas/tarjetas).

### **L. P√°gina de Suscripci√≥n (`/suscripcion` )**

- **Componente Principal:** `PricingPage.tsx`
- **Interacci√≥n:** Tabla de precios, secci√≥n interactiva de diferencias con calculadora para demostrar valor superior (comparaci√≥n costos, privacidad, ecosistema), mostrando num√©ricamente por qu√© somos mejores (e.g., ahorros calculados en tiempo real).

## 3. Flujo de Pago y Consentimiento (Monetizaci√≥n)

*La legalidad y la claridad en el pago son innegociables.*

1. **Oferta:** En la p√°gina de la herramienta de recuperaci√≥n de contrase√±as, junto al Nivel Gratuito, se mostrar√° claramente la oferta del Nivel Premium (`PricingTier.tsx`).
2. **Consentimiento Expl√≠cito:** Junto al bot√≥n de pago (`UpgradeButton.tsx`), habr√° una **casilla de verificaci√≥n (checkbox) obligatoria** con el siguiente texto:
    - > `‚òê He le√≠do y acepto los [T√©rminos y Condiciones](/legal/terminos) y entiendo el [Descargo de Responsabilidad](/legal/descargo-responsabilidad), reconociendo que el pago desbloquea la herramienta de software sin garant√≠a de √©xito en la recuperaci√≥n.`
3. **Proceso:** El bot√≥n de pago solo se activar√° una vez que el usuario marque esta casilla.
4. **Visibilidad:** El enlace al descargo de responsabilidad estar√° siempre visible durante todo el proceso de uso de la herramienta de recuperaci√≥n.

## 4. P√°ginas de Administraci√≥n (`/admin/*`)

- **Acceso:** Protegido por una p√°gina de login (`/admin/auth`).
- **Dashboard (`/admin`):** Vista general de los √∫ltimos art√≠culos, borradores pendientes y estad√≠sticas.
- **Gesti√≥n de Art√≠culos (`/admin/articles`):**
  - Una tabla (`ArticleDataTable.tsx`) para ver, filtrar, editar y eliminar todos los art√≠culos (manuales y de la IA).
  - Un bot√≥n para crear un nuevo art√≠culo, que lleva al editor.
- **Editor de Art√≠culos (`/admin/articles/[id]`):**
  - El editor `TipTap` (`ArticleEditor.tsx`) para modificar el contenido, cambiar el estado (Borrador/Publicado), a√±adir enlaces de afiliado y cambiar la imagen de portada.
- **Gesti√≥n de Contenido de la Home:** Una nueva secci√≥n en el admin para editar los campos del documento `siteContent/homepage` (el banner, etc.).

## 5. Mejoras Implementadas para Robustez y Producci√≥n 2025

### **A. Pruebas de Usabilidad del RecoveryWizard**

- **Descripci√≥n:** En p√°gina `/recuperacion`, integrar pruebas A/B: Usar Vercel o Optimizely para variar texto/orden de tarjetas en `RecoveryWizard.tsx`, midiendo conversi√≥n a herramientas. Registrar m√©tricas en Firestore para an√°lisis.

### **B. Dise√±o Discreto para Saturaci√≥n de Enlaces Legales**

- **Descripci√≥n:** En `Footer.tsx`, para m√≥vil, implementar acorde√≥n con Tailwind para colapsar enlaces legales (Columna 2), expandible con click. Mantener visibilidad pero reducir sobrecarga visual.

### **G. Adaptaci√≥n al Modelo de Pago por Horas en UI**

- **Descripci√≥n:** En `/suscripcion/page.tsx`, transformar en "Planes por Hora" con paquetes de compra √∫nica. En `/cuenta/page.tsx`, mostrar tiempo restante (H:M:S) y historial de compras. En herramientas como `WasmPasswordEngine.tsx` y `ChatbotUI.tsx`, a√±adir contador en tiempo real que se actualiza v√≠a API calls a trackUsage. Cr√©ditos iniciales: 15 min para herramientas, 30 min para chatbot en registro.

### **H. Calculadora de Precios Actualizada**

- **Descripci√≥n:** En `CompetitorComparison.tsx`, agregar inputs para "Monto a recuperar (‚Ç¨)" y "Horas estimadas". C√°lculo: Competencia = monto *0.20; Nuestro = (min(2, horas)* 4.99) + (max(0, horas - 2) * 3.99). Mostrar ahorros.

### **I. Gesti√≥n del Banner en Admin**

- **Descripci√≥n:** En `/admin/homepage`, nuevo componente para editar banner: Subir imagen de fondo, editar texto principal, imagen superpuesta, texto/enlace del bot√≥n. Almacenar en `siteContent/homepage`.

### **J. Gesti√≥n de Mensajes de Feedback en Admin**

- **Descripci√≥n:** En `/admin/feedback`, tabla para ver mensajes de `FeedbackButton.tsx`. Funciones: Leer todos, eliminar individual, eliminaci√≥n masiva v√≠a selecci√≥n.

### **K. Editor Avanzado de Blog en Admin**

- **Descripci√≥n:** En `ArticleEditor.tsx`, a√±adir: Editor enriquecido manual, programaci√≥n (inmediata/manual/autom√°tica con fecha/hora), gesti√≥n categor√≠as (crear/editar/eliminar din√°micas), tags m√∫ltiples. IA: Prompt para texto (Gemini Pro), prompt para im√°genes (DALL-E 3, almacenar en Firebase Storage), upload manual. Opciones: Tama√±o (800/1200/1600 palabras), a√±adir Q&A/conclusiones/recomendaciones, modo profundidad (Profundo/General).

### **L. Moderaci√≥n de Comentarios en Admin**

- **Descripci√≥n:** En `/admin/comments`, vista para ver/eliminar comentarios individualmente. Integrar moderaci√≥n IA autom√°tica en microservicio (an√°lisis con OpenAI Moderation), marcar/eliminar basado en config admin.
</DOCUMENT>

<DOCUMENT filename="PROYEC_PARTE3.MD">
üóÑÔ∏è PROYEC_PARTE3_FINAL_V3.MD (Backend)
2. Estructura de Carpetas (packages/functions) - ACTUALIZADO
text/packages/functions/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ articleHandlers.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ setAdminRole.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ siteContentHandlers.ts   # Para gestionar el contenido de la home
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ serviceDirectoryHandlers.ts # Para gestionar el directorio
‚îÇ   ‚îú‚îÄ‚îÄ payments/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ createCheckout.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stripeWebhooks.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ createStripePortalSession.ts  # **NUEVO** Para gesti√≥n de suscripciones
‚îÇ   ‚îú‚îÄ‚îÄ proxies/
‚îÇ   ‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handleContactForm.ts     # Para el formulario de contacto
‚îÇ   ‚îî‚îÄ‚îÄ lib/
...
3. Modelo de Datos (Firestore) - ACTUALIZADO

Colecci√≥n articles: (Sin cambios)
Colecci√≥n users: EXPANDIDO PARA SUSCRIPCIONES

ID: uid de Firebase Authentication
Campos:

email (string)
createdAt (timestamp)
hasPremiumAccess (boolean) - NUEVO CAMPO CLAVE
stripeCustomerId (string) - NUEVO Para integraci√≥n con Stripe
subscriptionStatus ('active' | 'canceled' | 'past_due' | null) - NUEVO
subscriptionId (string) - NUEVO ID de suscripci√≥n de Stripe

Colecci√≥n professionalServices:

ID: Autogenerado
Campos: name (string), website (string), description (string), logoUrl (string), specialties (array), isVerified (boolean).

Colecci√≥n siteContent:

ID del Documento: homepage
Campos: bannerImageUrl (string), bannerTitle_es (string), bannerTitle_en (string), bannerSubtitle_es (string), bannerSubtitle_en (string), bannerButtonText_es (string), bannerButtonText_en (string), bannerButtonLink (string).

Colecci√≥n contactSubmissions:

ID: Autogenerado
Campos: name (string), email (string), message (string), submittedAt (timestamp), status ('new' | 'read').

4. Reglas de Seguridad (Firestore) - ACTUALIZADO
textrules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /articles/{articleId} { ... }
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
      allow create: if request.auth != null && request.auth.uid == userId;
      // Solo admins pueden leer datos de otros usuarios
      allow read: if request.auth.token.admin == true;
    }

    // Cualquiera puede leer los servicios, solo los admins pueden escribir
    match /professionalServices/{serviceId} {
      allow read: if true;
      allow write: if request.auth.token.admin == true;
    }
    // Cualquiera puede leer el contenido de la home, solo admins pueden escribir
    match /siteContent/homepage {
      allow read: if true;
      allow write: if request.auth.token.admin == true;
    }
    // Cualquiera puede crear un env√≠o de contacto, pero nadie puede leerlos
    match /contactSubmissions/{submissionId} {
      allow read, write: if false;
      allow create: if true;
    }
  }
}
5. Nuevas Cloud Functions para Autenticaci√≥n y Suscripciones
5.1. createStripePortalSession.ts

Prop√≥sito: Crear sesi√≥n del Portal de Cliente de Stripe
Autenticaci√≥n: Usuario autenticado √∫nicamente
Flujo:

Verificar autenticaci√≥n del usuario
Obtener stripeCustomerId del documento del usuario
Crear sesi√≥n del portal con Stripe SDK
Retornar URL de redirecci√≥n segura

5.2. Webhook de Stripe (stripeWebhooks.ts) - EXPANDIDO

Eventos nuevos a manejar:

customer.subscription.created ‚Üí hasPremiumAccess: true
customer.subscription.updated ‚Üí Actualizar estado de suscripci√≥n
customer.subscription.deleted ‚Üí hasPremiumAccess: false

Actualizaciones autom√°ticas del documento de usuario en Firestore

5.3. Middleware de Autenticaci√≥n Frontend

Archivo: middleware.ts (Next.js)
Rutas protegidas: /(dashboard)/*
Redirecci√≥n: No autenticado ‚Üí /login

6. Mejoras Implementadas para Robustez y Producci√≥n 2025
A. Gesti√≥n de Costos en Serverless

Descripci√≥n: En funciones como handleContactForm.ts y proxies, integrar Redis (via Upstash o Google Memorystore) para cach√© de respuestas frecuentes a APIs externas, con TTL de 5min. A√±adir en lib/ un m√≥dulo cache.ts para manejar get/set sin alterar flujos existentes.

B. M√©tricas de Rendimiento

Descripci√≥n: En todas las Cloud Functions, a√±adir integraci√≥n con Google Cloud Monitoring: Usar @google-cloud/logging para registrar m√©tricas de latencia y errores. Configurar alertas para umbrales >500ms. A√±adir en cada handler: const logger = new Logging(); logger.logStructured({message: 'Execution time', duration: ms});.

C. Reestructuraci√≥n a Pago por Horas

Descripci√≥n: Eliminar hasPremiumAccess, subscriptionStatus, subscriptionId. A√±adir usageCreditsInSeconds (number) para cr√©ditos en segundos. Adaptar Stripe para compras √∫nicas de paquetes de horas (ej. checkout.session.completed suma segundos). Nueva funci√≥n trackUsage.ts: Descuenta segundos en tiempo real durante uso de herramientas/chatbot, trigger por eventos de usuario. Cr√©ditos iniciales en registro: 900s (15min) para herramientas, 1800s (30min) para chatbot.

D. Gesti√≥n de Precios en Admin

Descripci√≥n: Nueva funci√≥n adminPriceHandlers.ts para actualizar tarifas (4.99‚Ç¨/h primeras 2h, 3.99‚Ç¨/h siguientes) y paquetes de horas, almacenados en Firestore (colecci√≥n siteConfig/pricing).
</DOCUMENT>

<DOCUMENT filename="PROYEC_PARTE4.MD">
ü§ñ PROYECTO: Br√∫jula Cripto - Plan del Microservicio de Contenido IA (VERSI√ìN FINAL DE PRODUCCI√ìN)

1. Stack Tecnol√≥gico

Framework: Genkit for Firebase (TypeScript)
Ejecuci√≥n: Google Cloud Run (Contenedor Docker)
Modelo IA: Gemini Pro (v√≠a Vertex AI)
Trigger: Google Cloud Scheduler

2. L√≥gica y Centralizaci√≥n

Prompts Centralizados: Los prompts para Gemini estar√°n en archivos .txt (/src/prompts) para ser mejorados sin tocar el c√≥digo.
Tipos Compartidos: Importar√° IArticle desde @br√∫jula-cripto/types.
Validaci√≥n Robusta: Se usar√° Zod para validar la salida final del LLM.

3. Flujo de Ejecuci√≥n Detallado - Actualizado para i18n

Trigger: Cloud Scheduler llama a la URL de Cloud Run.
fetch-news: El flujo ejecuta la herramienta newsApiTool. Manejo de Errores: Si falla, usa un tema "evergreen" de fallback.
generate-content-es: Carga el prompt, lo formatea para espa√±ol, y genera title, contentMarkdown, y excerpt en espa√±ol.
generate-content-en: Carga el prompt, lo formatea para ingl√©s, y genera title, contentMarkdown, y excerpt en ingl√©s.
generate-seo-metadata: Genera un slug √∫nico (independiente del idioma), category, y tags basados en el contenido de ambos idiomas.
check-slug-uniqueness: Consulta Firestore para asegurar que el slug no existe. Si existe, a√±ade un sufijo.
assemble-and-validate: Construye el objeto IArticle final con los contenidos de es y en y los metadatos. Valida el objeto completo con Zod.
save-to-firestore: Si la validaci√≥n pasa, guarda el art√≠culo completo en la base de datos con status: 'draft' y source: 'ai-generated'.
Logging: Cada paso registra su estado en Google Cloud Logging.

4. Seguridad y Configuraci√≥n

Gesti√≥n de Secretos: Las claves de Vertex AI se inyectar√°n de forma segura en el entorno de Cloud Run a trav√©s de Google Secret Manager.
Variables de Entorno: La configuraci√≥n (Project ID, etc.) se pasar√° al contenedor de Cloud Run en el momento del despliegue.

5. Mejoras Implementadas para Robustez y Producci√≥n 2025
A. Optimizaci√≥n de Carga en Vertex AI

Descripci√≥n: En flujo de ejecuci√≥n, a√±adir paso post-indexaci√≥n: Optimizar √≠ndice en Vertex AI priorizando documentos de alta relevancia (basado en frecuencia de uso), con limpieza peri√≥dica semanal via Scheduler. A√±adir en logging: Registro de tama√±o de √≠ndice para monitoreo.

B. Validaci√≥n de Respuestas T√©cnicas

Descripci√≥n: Despu√©s de assemble-and-validate, a√±adir paso audit-responses: Implementar auditor√≠a automatizada usando Zod para precisi√≥n t√©cnica, con fallback a revisi√≥n manual si score <90%. Integrar en flujo sin alterar validaci√≥n Zod existente.

C. Generaci√≥n SEO Automatizada

Descripci√≥n: En generate-seo-metadata, generar metaetiquetas din√°micas (title, description, keywords) enfocadas a SEO 2025 (usando schema.org, mobile-first indexing). Categor√≠as/tags din√°micos, editables desde admin. Para posts autom√°ticos, opci√≥n en admin para foto (s√≠/no), enlace afiliado, programaci√≥n de publicaci√≥n.

D. Moderaci√≥n Autom√°tica de Comentarios

Descripci√≥n: Nuevo flujo moderateComment: Analiza comentarios nuevos con OpenAI Moderation o Google Perspective API. Marcar para revisi√≥n o eliminar autom√°ticamente basado en config admin (almacenada en Firestore). Trigger por writes en subcolecci√≥n comments.

E. Adaptaci√≥n para Uso Externo

Descripci√≥n: A√±adir endpoints API para embed en otras webs (ej. GET /articles?siteKey=xxx). Monetizar v√≠a suscripciones API (verificar key en Firestore, limitar por quota). M√≠nimos cambios: A√±adir param siteKey en queries, sin alterar flujos internos.
</DOCUMENT>

<DOCUMENT filename="PROYEC_PARTE5.MD">
<DOCUMENT filename="PROYEC_PARTE5.MD">
# üó∫Ô∏è Br√∫jula Cripto: Plano de Experiencia de Usuario y Navegaci√≥n (Producci√≥n)

### Pre√°mbulo

Este documento detalla la estructura visible de la aplicaci√≥n, las p√°ginas, su contenido, la navegaci√≥n y los flujos de interacci√≥n del usuario. Es el complemento a los planos de arquitectura y debe seguirse para construir una experiencia de usuario coherente, intuitiva y legalmente s√≥lida. Todo est√° dise√±ado bajo un principio **Mobile-First**.

---

## 1. Navegaci√≥n Global

### **A. Cabecera (Navbar - `Navbar.tsx`)**

*La cabecera ser√° limpia, minimalista y estar√° siempre visible (sticky).*

- **Logo:** A la izquierda, enlaza a la p√°gina de inicio.
- **Enlaces de Navegaci√≥n (P√∫blico):**
  - **Blog:** Enlaza a `/blog`.
  - **Herramientas ‚ñæ:** Un men√∫ desplegable que contiene:
    - **Diagn√≥stico y Recuperaci√≥n:** Enlaza a `/recuperacion`.
    - **Rastreador de Transacciones:** Enlaza a `/herramientas/tracker`.
    - **Directorio de Servicios:** Enlaza a `/herramientas/servicios`.
  - **Gu√≠as de Seguridad:** Enlaza a `/seguridad`.
- **Acciones a la Derecha:**
  - **Selector de Idioma (ES/EN):** Un icono de globo terr√°queo con un peque√±o men√∫.
  - **Selector de Tema (Claro/Oscuro):** Un icono de sol/luna.
  - **Contacto:** Enlaza a `/contacto`.

### **B. Pie de P√°gina (Footer - `Footer.tsx`)**

*El pie de p√°gina ser√° compacto y contendr√° informaci√≥n esencial sin ocupar demasiado espacio.*

- **Estructura (3 columnas en escritorio, apiladas en m√≥vil):**
  - **Columna 1: Navegaci√≥n**
    - Blog
    - Herramientas
    - Gu√≠as de Seguridad
    - Contacto
  - **Columna 2: Legalidad**
    - **Aviso Legal:** Enlaza a `/legal/aviso-legal`.
    - **Pol√≠tica de Privacidad:** Enlaza a `/legal/privacidad`.
    - **T√©rminos y Condiciones:** Enlaza a `/legal/terminos`.
  - **Columna 3: Contacto y Redes Sociales**
    - **Soporte:** `soporte@brujulacripto.com`
    - **Informaci√≥n:** `info@brujulacripto.com`
    - **Iconos de Redes Sociales:** (ej. X/Twitter, Telegram, YouTube) con sus respectivos enlaces.
- **L√≠nea Inferior:**
  - `¬© 2025 Br√∫jula Cripto. Todos los derechos reservados.`
  - **Descargo de Responsabilidad General:** Un enlace bien visible a `/legal/descargo-responsabilidad`.

---

## 2. P√°ginas Visibles al P√∫blico

### **A. P√°gina de Inicio (`/`)**

1. **Banner Principal (`HomepageBanner.tsx`):** Imagen de fondo, t√≠tulo, subt√≠tulo y un bot√≥n de llamada a la acci√≥n (CTA). **Todo el contenido es editable** desde el panel de administraci√≥n (foto, texto, bot√≥n enlace/texto, etc.).
2. **Carrusel de Posts (`FeaturedPostsCarousel.tsx`):** Muestra las √∫ltimas 4-5 entradas destacadas del blog con tarjetas visuales (`ArticleCard.tsx`).
3. **Secci√≥n de Herramientas:** Iconos y descripciones breves de las herramientas principales, con enlaces a cada una.
4. **Descargo de Responsabilidad:** Un peque√±o pero visible bloque de texto en la parte inferior de la p√°gina con un resumen del descargo y enlace completo.
5. **Bot√≥n de Feedback (`FeedbackButton.tsx`):** Solo para suscritos, permite enviar mensajes (reconociendo usuario). Admin puede anular/pendiente, cambiar enlace, texto, imagen.

### **B. P√°gina de Diagn√≥stico Interactivo (`/recuperacion`)**

- **Componente:** `RecoveryWizard.tsx`.
- **Interacci√≥n:** Una serie de tarjetas con preguntas comunes, como "He perdido mi contrase√±a" (enlaza a `/recuperacion/password`).

### **C. P√°gina de Recuperaci√≥n de Contrase√±a (`/recuperacion/password`)**

- **Componente:** `WasmPasswordEngine.tsx`.
- **Interacci√≥n:** Formulario para introducir datos (ej. diccionarios), con niveles gratuito (limitado) y premium (ilimitado). Muestra progreso y resultados.

### **D. P√°gina de Gu√≠as de Seguridad (`/seguridad`)**

- **Componente:** `SecurityGuides.tsx`.
- **Interacci√≥n:** Lista filtrada del blog por categor√≠a "seguridad".

### **E. P√°gina de Rastreador de Transacciones (`/herramientas/tracker`)**

- **Componente:** `TransactionTracker.tsx`.
- **Interacci√≥n:** Formulario para introducir hash de transacci√≥n o direcci√≥n, muestra resultados detallados de APIs externas.

### **F. P√°gina de Directorio de Servicios (`/herramientas/servicios`)**

- **Componente:** `ServiceDirectory.tsx`.
- **Interacci√≥n:** Lista de servicios profesionales con filtros por especialidad.

### **G. P√°ginas Legales (`/legal/*`)**

*Estas p√°ginas son fundamentales y deben estar perfectamente redactadas.*

1. **Aviso Legal, Privacidad, T√©rminos y Condiciones:** P√°ginas de texto est√°tico con el contenido legal correspondiente.
2. **Descargo de Responsabilidad (`/legal/descargo-responsabilidad`):**
    - **Contenido:** Esta p√°gina contendr√° un texto **enorme y muy claro** explicando que Br√∫jula Cripto es una herramienta de software, que no garantiza la recuperaci√≥n, que no es un servicio de custodia, que no ofrece consejo financiero y que el uso de las herramientas es bajo la propia responsabilidad del usuario.
    - **Visibilidad:** El enlace a esta p√°gina estar√° en el footer y en cualquier lugar donde se ofrezca un servicio de pago o de riesgo.

### **H. P√°gina de Contacto (`/contacto`)**

- **Componente:** `ContactForm.tsx`.
- **Interacci√≥n:** Formulario para enviar nombre, email y mensaje, que se procesa a trav√©s de una Cloud Function.

### **I. P√°gina del Blog (`/blog`)**

- **Componente Principal:** `BlogPage.tsx`
- **Estructura:** Banner superior editable desde admin (foto, texto H1/H2, descripci√≥n). Barra de b√∫squeda para t√≠tulos/tags/categor√≠as. Lista paginada de tarjetas con sharing nativo, likes/comentarios solo para suscritos. Categor√≠as din√°micas editables desde admin.

### **J. P√°gina de Art√≠culo (`/blog/[slug]`)**

- **Componente:** `ArticlePage.tsx`
- **Estructura:** Contenido f√°cil de leer, tags clicables, flechas para navegaci√≥n, sharing nativo, likes/comentarios para suscritos.

### **K. P√°gina del Chatbot (`/chatbot`)**

- **Componente:** `ChatbotUI.tsx`
- **Estructura:** Interfaz espectacular con imagen de br√∫jula como logo, nombre "Br√∫jula". Conversaciones listadas, respuestas streaming, sugerencias, render components (tablas/tarjetas).

### **L. P√°gina de Suscripci√≥n (`/suscripcion`)**

- **Componente Principal:** `PricingPage.tsx`
- **Interacci√≥n:** Tabla de precios, secci√≥n interactiva de diferencias con calculadora para demostrar valor superior (comparaci√≥n costos, privacidad, ecosistema), mostrando num√©ricamente por qu√© somos mejores (e.g., ahorros calculados en tiempo real).

---

## 3. Flujo de Pago y Consentimiento (Monetizaci√≥n)

*La legalidad y la claridad en el pago son innegociables.*

1. **Oferta:** En la p√°gina de la herramienta de recuperaci√≥n de contrase√±as, junto al Nivel Gratuito, se mostrar√° claramente la oferta del Nivel Premium (`PricingTier.tsx`).
2. **Consentimiento Expl√≠cito:** Junto al bot√≥n de pago (`UpgradeButton.tsx`), habr√° una **casilla de verificaci√≥n (checkbox) obligatoria** con el siguiente texto:
    - > `‚òê He le√≠do y acepto los [T√©rminos y Condiciones](/legal/terminos) y entiendo el [Descargo de Responsabilidad](/legal/descargo-responsabilidad), reconociendo que el pago desbloquea la herramienta de software sin garant√≠a de √©xito en la recuperaci√≥n.`
3. **Proceso:** El bot√≥n de pago solo se activar√° una vez que el usuario marque esta casilla.
4. **Visibilidad:** El enlace al descargo de responsabilidad estar√° siempre visible durante todo el proceso de uso de la herramienta de recuperaci√≥n.

---

## 4. P√°ginas de Administraci√≥n (`/admin/*`)

- **Acceso:** Protegido por una p√°gina de login (`/admin/auth`).
- **Dashboard (`/admin`):** Vista general de los √∫ltimos art√≠culos, borradores pendientes y estad√≠sticas.
- **Gesti√≥n de Art√≠culos (`/admin/articles`):**
  - Una tabla (`ArticleDataTable.tsx`) para ver, filtrar, editar y eliminar todos los art√≠culos (manuales y de la IA).
  - Un bot√≥n para crear un nuevo art√≠culo, que lleva al editor.
- **Editor de Art√≠culos (`/admin/articles/[id]`):**
  - El editor `TipTap` (`ArticleEditor.tsx`) para modificar el contenido, cambiar el estado (Borrador/Publicado), a√±adir enlaces de afiliado y cambiar la imagen de portada.
- **Gesti√≥n de Contenido de la Home:** Una nueva secci√≥n en el admin para editar los campos del documento `siteContent/homepage` (el banner, etc.).

## 5. Mejoras Implementadas para Robustez y Producci√≥n 2025

### **A. Pruebas de Usabilidad del RecoveryWizard**

- **Descripci√≥n:** En p√°gina `/recuperacion`, integrar pruebas A/B: Usar Vercel o Optimizely para variar texto/orden de tarjetas en `RecoveryWizard.tsx`, midiendo conversi√≥n a herramientas. Registrar m√©tricas en Firestore para an√°lisis.

### **B. Dise√±o Discreto para Saturaci√≥n de Enlaces Legales**

- **Descripci√≥n:** En `Footer.tsx`, para m√≥vil, implementar acorde√≥n con Tailwind para colapsar enlaces legales (Columna 2), expandible con click. Mantener visibilidad pero reducir sobrecarga visual.

### **C. Integraci√≥n de Pago por Horas en Flujos UX**

- **Descripci√≥n:** En herramientas y chatbot, mostrar contador de tiempo restante que descuenta en real-time. En `/suscripcion`, enfocarse en paquetes de horas con calculadora actualizada (inputs monto/horas, coste escalonado).

### **D. Gesti√≥n de Usuarios en Admin**

- **Descripci√≥n:** Nueva secci√≥n `/admin/users`: Lista de usuarios con estado, saldo usageCreditsInSeconds (formato H:M:S). Filtros y exportaci√≥n.
</DOCUMENT>

</DOCUMENT>

<DOCUMENT filename="PROYEC_PARTE6.MD">
<DOCUMENT filename="PROYEC_PARTE6.MD">
# üó∫Ô∏è PROYEC_PARTE6.MD - Plano de Experiencia de Usuario y Navegaci√≥n

## 1. Navegaci√≥n Global y P√°ginas P√∫blicas

### **A. Estructura de Navegaci√≥n**

- **Header Adaptativo:** Cambia seg√∫n estado de autenticaci√≥n del usuario
- **Footer Consistente:** Enlaces legales y contacto en todas las p√°ginas
- **Breadcrumbs:** Navegaci√≥n jer√°rquica en p√°ginas internas

### **B. Estados de Navegaci√≥n**

#### **Usuario NO Autenticado**

```
[Logo] [Blog] [Herramientas] [Contacto] [Registro] [Login]
```

#### **Usuario Autenticado**

```
[Logo] [Blog] [Herramientas] [Contacto] [Avatar ‚ñº]
                                        ‚îú‚îÄ Mi Cuenta
                                        ‚îî‚îÄ Cerrar Sesi√≥n
```

## 2. P√°ginas P√∫blicas (√Årea `(main)/`)

### **A. P√°ginas de Contenido**

1. **Inicio (`/`)** - HomepageBanner + FeaturedPostsCarousel
2. **Blog (`/blog`)** - Lista con b√∫squeda y paginaci√≥n
3. **Art√≠culo (`/blog/[slug]`)** - Vista individual de art√≠culo
4. **Contacto (`/contacto`)** - Formulario de contacto

### **B. Herramientas P√∫blicas**

1. **Recuperaci√≥n (`/recuperacion`)** - RecoveryWizard (diagn√≥stico)
2. **Motor WASM (`/recuperacion/password`)** - WasmPasswordEngine
3. **Seguridad (`/seguridad`)** - Blog filtrado por categor√≠a
4. **Tracker (`/herramientas/tracker`)** - TransactionTracker
5. **Servicios (`/herramientas/servicios`)** - ServiceDirectory

### **C. P√°ginas Legales (`/legal/`)**

1. **Aviso Legal (`/legal/aviso-legal` )**
2. **Privacidad (`/legal/privacidad` )**
3. **T√©rminos (`/legal/terminos` )**
4. **Descargo (`/legal/descargo-responsabilidad` )**

## 3. Cuentas de Usuario y Suscripci√≥n

### **A. P√°ginas de Autenticaci√≥n (`(main)/`)**

#### **A.1. Registro (`/registro`)**

- **Componente:** `SignUpForm.tsx`
- **Campos:** Email, Contrase√±a, Confirmar Contrase√±a
- **Validaci√≥n:** Checkbox obligatorio para Pol√≠tica de Privacidad y T√©rminos
- **Post-registro:** Redirecci√≥n autom√°tica a `/cuenta`
- **Enlaces:** "¬øYa tienes cuenta? Inicia sesi√≥n"

#### **A.2. Inicio de Sesi√≥n (`/login`)**

- **Componente:** `SignInForm.tsx`
- **Opciones:**
  - Email y Contrase√±a
  - Bot√≥n "Iniciar sesi√≥n con Google"
- **Enlaces:**
  - "¬øOlvidaste tu contrase√±a?" ‚Üí `/recuperar-password`
  - "¬øNo tienes cuenta? Reg√≠strate" ‚Üí `/registro`

#### **A.3. Recuperaci√≥n de Contrase√±a (`/recuperar-password`)**

- **Componente:** `PasswordResetForm.tsx`
- **Flujo:**
  1. Usuario introduce email
  2. Firebase Authentication env√≠a correo autom√°tico
  3. Usuario recibe enlace seguro para restablecer
- **Mensaje de confirmaci√≥n:** "Revisa tu correo electr√≥nico"

### **B. P√°gina de Suscripci√≥n (`/suscripcion`)**

#### **B.1. Estructura de Precios**

- **Componente:** `PricingPage.tsx`
- **Estructura:** Dos columnas comparativas (Gratuito vs Premium)
- **Nivel Gratuito:** Limitaciones claras (15 min b√∫squeda, potencia b√°sica)
- **Nivel Premium:** Beneficios (`hasPremiumAccess: true`):
  - B√∫squeda ilimitada
  - M√°xima potencia CPU
  - Diccionarios avanzados
  - Soporte prioritario
- **CTA:** Bot√≥n "Obtener Premium" ‚Üí integraci√≥n Stripe

### **B.2. P√°gina de Error 404 (`not-found.tsx`)**

- **Componente:** `NotFoundPage.tsx`
- **Estructura:** Imagen amigable (br√∫jula perdida), H1 ("P√°gina No Encontrada"), descripci√≥n ("Lo sentimos, la p√°gina que buscas no existe.").

## 4. Flujos de Usuario Cr√≠ticos

### **A. Flujo de Registro Completo**

1. **Descubrimiento:** Usuario llega desde herramientas ‚Üí ve limitaciones
2. **Conversi√≥n:** Click en "Obtener Premium" ‚Üí `/suscripcion`
3. **Decisi√≥n:** Comparaci√≥n Gratuito vs Premium ‚Üí Click "Obtener Premium"
4. **Autenticaci√≥n:** Redirecci√≥n a `/registro` ‚Üí formulario
5. **Pago:** Post-registro ‚Üí checkout Stripe
6. **Activaci√≥n:** Webhook actualiza `hasPremiumAccess: true`
7. **Bienvenida:** Redirecci√≥n a `/cuenta` con estado Premium

### **B. Flujo de Login Existente**

1. **Acceso:** Usuario intenta acceder `/cuenta` sin autenticaci√≥n
2. **Redirecci√≥n:** Middleware ‚Üí `/login`
3. **Autenticaci√≥n:** Email/contrase√±a o Google OAuth
4. **Redirecci√≥n:** Post-login ‚Üí `/cuenta` o p√°gina origen

### **C. Flujo de Gesti√≥n de Suscripci√≥n**

1. **Acceso:** Usuario Premium en `/cuenta` ‚Üí pesta√±a "Mi Suscripci√≥n"
2. **Portal:** Click "Gestionar mi Suscripci√≥n" ‚Üí Portal Stripe
3. **Gesti√≥n:** Cambios en portal (facturaci√≥n, cancelaci√≥n, etc.)
4. **Webhook:** Stripe notifica cambios ‚Üí actualizaci√≥n Firestore
5. **Reflejo:** Cambios se reflejan en pr√≥ximo login

## 5. Adaptaciones de Navegaci√≥n

### **A. Responsive Design**

- **Mobile:** Men√∫ hamburguesa colapsible
- **Tablet:** Navegaci√≥n horizontal compacta  
- **Desktop:** Navegaci√≥n completa expandida

### **B. Estados de Loading**

- **Autenticaci√≥n:** Spinner durante verificaci√≥n de estado
- **Portal Stripe:** Loading durante redirecci√≥n
- **Formularios:** Estados de env√≠o con feedback

### **C. Manejo de Errores**

- **Autenticaci√≥n fallida:** Mensajes claros de error
- **Stripe checkout error:** Redirecci√≥n de vuelta con mensaje
- **Conexi√≥n perdida:** Notificaci√≥n de reconexi√≥n

## 6. Integraci√≥n con Documentaci√≥n Existente

### **A. Actualizaci√≥n PROYEC_PARTE2.MD (Frontend)**

- ‚úÖ Nuevas rutas agregadas: `/(main)/registro`, `/(main)/login`, etc.
- ‚úÖ Nuevos componentes: `SignUpForm`, `SignInForm`, `PricingPage`, `UserDashboard`
- ‚úÖ Navegaci√≥n adaptativa especificada

### **B. Actualizaci√≥n PROYEC_PARTE3.MD (Backend)**

- ‚úÖ Modelo `users` expandido con campos de suscripci√≥n
- ‚úÖ Nueva Cloud Function: `createStripePortalSession.ts`
- ‚úÖ Webhook Stripe expandido para eventos de suscripci√≥n
- ‚úÖ Reglas de seguridad actualizadas para protecci√≥n de datos

### **C. Middleware de Protecci√≥n**

- **Archivo:** `middleware.ts` (Next.js)
- **Rutas protegidas:** `/(dashboard)/*`
- **Comportamiento:** Redirecci√≥n autom√°tica a `/login` si no autenticado

## 7. Mejoras Implementadas para Robustez y Producci√≥n 2025

### **A. Precios Espec√≠ficos en Suscripci√≥n**

- **Descripci√≥n:** En secci√≥n B.1, definir precios: Premium a 9.99‚Ç¨/mes o 99‚Ç¨/a√±o (pago √∫nico anual). Actualizar en `PricingPage.tsx` con variables ambientales para flexibilidad.

### **B. Especificaci√≥n de Soporte Prioritario**

- **Descripci√≥n:** En Nivel Premium, detallar: SLA de respuesta <24h v√≠a email dedicado, canales Slack para premium. A√±adir en pesta√±a "Mi Suscripci√≥n" un bot√≥n "Soporte Prioritario".

### **C. Retenci√≥n de Usuarios**

- **Descripci√≥n:** En flujo C, a√±adir post-webhook: Enviar emails con Mailgun para an√°lisis peri√≥dicos de wallets (semanal para premium). Integrar en webhook Stripe para triggers de renovaci√≥n.

### **D. Valor Diferencial en Suscripci√≥n**

- **Descripci√≥n:** En `/suscripcion`, enfatizar diferencias: Privacidad (local vs servidores), ecosistema (completo vs limitado), facilidad (r√°pido vs tr√°mites), control (real-time vs caja negra). Usar calculadora interactiva para demostrar ahorros (input monto, output comparaci√≥n costos).

### **E. Adaptaci√≥n a Pago por Horas en Flujos**

- **Descripci√≥n:** Reemplazar suscripciones por compras de paquetes de horas. En flujos A/C, adaptar activaci√≥n a suma de usageCreditsInSeconds. Cr√©ditos iniciales en registro. Contadores en herramientas/chatbot.

### **F. Calculadora en Suscripci√≥n**

- **Descripci√≥n:** Inputs "Monto (‚Ç¨)" y "Horas". C√°lculo competencia 20%, nuestro escalonado (4.99‚Ç¨/h primeras 2, 3.99‚Ç¨/h siguientes).
</DOCUMENT>

</DOCUMENT>

<DOCUMENT filename="PROYEC_PARTE7.MD">
ü§ñ Br√∫jula Cripto: Plan de Arquitectura - Miniservicio de Chatbot Cripto-Especialista (V2)
1. Visi√≥n General y Prop√≥sito
Este documento detalla la arquitectura de un miniservicio completamente independiente y robusto que alojar√° a un chatbot especialista en criptomonedas. El servicio funcionar√° bajo un modelo Freemium y se integrar√° con la plataforma principal de Br√∫jula Cripto.
Principios Clave:

Aislamiento: El servicio se ejecuta de forma independiente para no afectar al rendimiento de la aplicaci√≥n principal.
Escalabilidad: Construido sobre infraestructura serverless para manejar cualquier nivel de carga.
Inteligencia Real: El chatbot no solo responde, sino que "aprende" a trav√©s de RAG (Retrieval-Augmented Generation) y puede interactuar con datos de la blockchain en tiempo real.

2. Arquitectura T√©cnica Detallada
El servicio se construir√° sobre Google Cloud, manteniendo la coherencia con el resto del ecosistema.

Hosting del Servicio: Google Cloud Run.
Orquestaci√≥n de IA: Genkit for Firebase.
Modelo de Lenguaje (LLM): Google Gemini Pro.
Base de Datos de Conversaciones: Cloud Firestore.
Base de Conocimiento ("Aprendizaje"): Vertex AI Vector Search. Aqu√≠ es donde el chatbot "aprende", indexando documentaci√≥n t√©cnica, whitepapers y gu√≠as de seguridad para dar respuestas expertas (RAG).
Conexi√≥n a la Blockchain (Herramientas): El chatbot usar√° "Tools" de Genkit para interactuar con APIs externas (ej. Covalent, Moralis, GoPlus Security). Las herramientas ser√°n:

getWalletAnalysis(address, chain): Devuelve el balance, tokens, NFTs y un an√°lisis de riesgos.
getTransactionStatus(txHash, chain): Verifica el estado de una transacci√≥n.
getContractAuditSummary(contractAddress, chain): Obtiene un resumen de la seguridad de un contrato.

3. Modelo de Datos en Firestore (Dedicado al Chatbot)

Colecci√≥n chatbot_conversations:

Campos: userId, title, isFavorite, createdAt, updatedAt.

Sub-colecci√≥n chatbot_messages:

Anidada dentro de cada conversaci√≥n.
Campos: role ('user' | 'model'), content, timestamp.

4. Funcionalidades de Usuario y Flujo de Interacci√≥n
El frontend (packages/app) tendr√° una nueva secci√≥n para el chatbot que interactuar√° con el miniservicio a trav√©s de una API REST.

Endpoints de la API: GET /conversations, POST /conversations, PUT /conversations/{id}, DELETE /conversations/{id}, POST /conversations/{id}/messages (con streaming).
Panel de Usuario del Chatbot: Una barra lateral con la lista de conversaciones (crear, renombrar, favorito, borrar) y la ventana de chat principal.

5. Modelo de Monetizaci√≥n y Propuesta de Valor
La suscripci√≥n hasPremiumChatAccess desbloquea el valor real del chatbot: el an√°lisis proactivo de la blockchain.
A. El Valor para el Usuario Gratuito (El Anzuelo üé£)
El usuario gratuito obtiene un experto en cripto para consultas generales. Cuando pide un an√°lisis de wallet, el chatbot le ofrece una "demostraci√≥n" limitada para engancharlo.

Respuesta Gratuita: "He identificado que la direcci√≥n 0x123... es una wallet v√°lida en Ethereum. Para realizar un an√°lisis completo en tiempo real, incluyendo el valor de tu portafolio, desglose de tokens/NFTs y un informe de riesgos de seguridad, necesitas acceso Premium. ¬øQuieres saber m√°s?"

B. El Valor para el Usuario de Pago (La Soluci√≥n Completa üõ°Ô∏è)
El usuario de pago obtiene un analista de seguridad personal. El chatbot le entrega un informe completo y accionable.

Respuesta Premium: "Claro. Aqu√≠ tienes el an√°lisis de tu wallet:

Valor Total: 1,250.45 ‚Ç¨
Activos: 150.2 MATIC, 0.25 WETH, 500.10 USDC...
NFTs: 2 de la colecci√≥n "CryptoPunks Polygon".
üö® ¬°AN√ÅLISIS DE RIESGOS! üö®

¬°Atenci√≥n! Aprobaci√≥n de Contrato de Riesgo: Tienes una aprobaci√≥n ilimitada para el contrato 0x789.... Este contrato podr√≠a retirar todos tus WETH. Se recomienda revocar este permiso inmediatamente."

El valor es la claridad financiera y, sobre todo, la seguridad proactiva que puede evitar p√©rdidas catastr√≥ficas.

6. Integraci√≥n con la Plataforma Existente

Frontend (packages/app): Se crear√° una nueva ruta /chatbot con los componentes de la interfaz (ChatbotUI.tsx, ConversationList.tsx). El archivo lib/api.ts se ampliar√° para llamar a los endpoints del nuevo miniservicio.
Backend (packages/functions): Se a√±adir√°n las funciones de pago de Stripe para la nueva suscripci√≥n, que modificar√°n el campo hasPremiumChatAccess en el perfil del usuario.
Tipos (packages/types): Se a√±adir√°n las nuevas interfaces: IChatConversation y IChatMessage.

7. Experiencia de Usuario (UX) Espectacular
Para que sea el mejor chatbot del mundo, la experiencia debe ser impecable:

Respuestas en Streaming: El chatbot escribir√° las respuestas palabra por palabra, como ChatGPT, dando una sensaci√≥n de "pensamiento" en tiempo real y mejorando la percepci√≥n de velocidad.
Sugerencias de Preguntas: Al iniciar una nueva conversaci√≥n o despu√©s de una respuesta, el chatbot sugerir√° preguntas de seguimiento relevantes. Ej: "¬øQuieres que analice los riesgos de este contrato?", "¬øTe gustar√≠a saber m√°s sobre el token WETH?".
Renderizado de Componentes: El chatbot no solo devolver√° texto. Cuando genere un informe de wallet, el frontend renderizar√° componentes visuales (tablas para tokens, tarjetas para NFTs) dentro del chat, haciendo la informaci√≥n mucho m√°s digerible.
Memoria a Corto y Largo Plazo: El chatbot recordar√° el contexto de la conversaci√≥n actual. Adem√°s, a trav√©s de RAG, tendr√° acceso al conocimiento experto, simulando una memoria a largo plazo.
Claridad y Simplicidad: Todas las respuestas, incluso las m√°s t√©cnicas, se explicar√°n en un lenguaje sencillo. El objetivo no es abrumar, sino empoderar al usuario.
Dise√±o Espectacular: Imagen principal de br√∫jula como icono/logo, nombre del chatbot "Br√∫jula" visible en header de p√°gina.

8. Mejoras Implementadas para Robustez y Producci√≥n 2025
A. L√≠mites de Uso para Chatbot Gratuito

Descripci√≥n: En endpoints API, implementar l√≠mites: Usuarios gratuitos limitados a 10 mensajes/d√≠a, usando Firestore para contar via userId. Si excede, retornar error 429 con mensaje upselling. No altera flujos premium.

B. Integraci√≥n de Pago por Horas

Descripci√≥n: Reemplazar hasPremiumChatAccess por chequeo de usageCreditsInSeconds. En flujos de interacci√≥n, llamar a trackUsage para descontar segundos durante uso. Cr√©dito inicial 1800s (30min) para registrados. Upselling en respuestas gratuitas si cr√©ditos bajos.
</DOCUMENT>

<DOCUMENT filename="TEXTOS_IMAGENES.MD">
<DOCUMENT filename="TEXTOS_IMAGENES.MD">
# üíé SEO, Copywriting y Activos Visuales (Producci√≥n V2)

### Pre√°mbulo

Este documento detalla el contenido textual (copy), las metaetiquetas SEO (t√≠tulo y descripci√≥n) y las especificaciones para los activos visuales de todas las p√°ginas p√∫blicas de Br√∫jula Cripto. El objetivo es crear una narrativa de marca fuerte, comunicar valor real y alcanzar la m√°xima visibilidad en motores de b√∫squeda.

---

## **1. P√ÅGINA DE INICIO (`/`)**

*Objetivo: Captar la atenci√≥n en 3 segundos, establecer confianza y guiar al usuario hacia las herramientas clave.*

### **Metaetiquetas SEO**

- **Espa√±ol:**
  - `title`: Br√∫jula Cripto | Seguridad y Recuperaci√≥n de Criptomonedas
  - `description`: Tu gu√≠a experta para proteger, gestionar y recuperar tus criptoactivos. Herramientas reales y conocimiento para darte tranquilidad en el mundo cripto.
- **Ingl√©s:**
  - `title`: Crypto Compass | Cryptocurrency Security & Recovery
  - `description`: Your expert guide to protect, manage, and recover your crypto assets. Real tools and knowledge to give you peace of mind in the crypto world.

### **Secci√≥n 1: Banner Principal (`HomepageBanner.tsx`)**

- **Imagen de Fondo:**
  - **Ruta:** `/public/images/home/banner-hero.webp`
  - **Tama√±o:** 1920x1080px (16:9)
  - **Prompt para generar imagen:** "Abstract, elegant digital vault with a glowing blue compass needle floating in the center, dark background, cinematic lighting, sophisticated, secure, tech aesthetic."
- **Contenido (ES):**
  - **T√≠tulo (H1):** `Navega el Mundo Cripto con Confianza.`
  - **Subt√≠tulo:** `Herramientas reales para proteger y recuperar tus activos digitales. Tu tranquilidad es nuestra misi√≥n.`
  - **Bot√≥n:** `Empezar Diagn√≥stico` (enlaza a `/recuperacion`)
- **Contenido (EN):**
  - **Title (H1):** `Maps the Crypto World with Confidence.`
  - **Subtitle:** `Real tools to protect and recover your digital assets. Your peace of mind is our mission.`
  - **Button:** `Start Diagnosis` (links to `/en/recovery`)

### **Secci√≥n 2: Propuesta de Valor (`ValueProposition.tsx`)**

*Una secci√≥n limpia con 3 iconos y texto breve.*

- **T√≠tulo (ES):** `Tu Escudo en el Ecosistema Digital`
- **T√≠tulo (EN):** `Your Shield in the Digital Ecosystem`
- **Columna 1:**
  - **Icono:** Un escudo (`shield-check-icon.svg`)
  - **T√≠tulo (ES):** `Protecci√≥n Proactiva`
  - **Texto (ES):** `Analiza los riesgos de tus wallets antes de que se conviertan en un problema.`
  - **T√≠tulo (EN):** `Proactive Protection`
  - **Texto (EN):** `Analyze your wallets' risks before they become a problem.`
- **Columna 2:**
  - **Icono:** Una llave inglesa (`wrench-icon.svg`)
  - **T√≠tulo (ES):** `Herramientas Reales`
  - **Texto (ES):** `Desde recuperaci√≥n de contrase√±as hasta rastreo de transacciones.`
  - **T√≠tulo (EN):** `Real Tools`
  - **Texto (EN):** `From password recovery to transaction tracking.`
- **Columna 3:**
  - **Icono:** Una br√∫jula (`compass-icon.svg`)
  - **T√≠tulo (ES):** `Gu√≠a Experta`
  - **Texto (ES):** `Conocimiento y chatbot para navegar con seguridad.`
  - **T√≠tulo (EN):** `Expert Guide`
  - **Texto (EN):** `Knowledge and chatbot to navigate securely.`

### **Secci√≥n 3: Carrusel de Posts Destacados (`FeaturedPostsCarousel.tsx`)**

- **Imagen de Fondo (opcional):** Ninguna, para mantener foco en tarjetas.
- **Contenido:** Muestra 4-5 posts recientes del blog con tarjetas (`ArticleCard.tsx`), cada una con imagen de portada, t√≠tulo, excerpt y enlace al art√≠culo completo.
- **Interacci√≥n:** Carrusel deslizable con controles de flechas, auto-scroll opcional desactivado por defecto.

### **Secci√≥n 4: Bot√≥n de Feedback (`FeedbackButton.tsx`)**

- **Ubicaci√≥n:** Flotante en esquina inferior derecha de la homepage, visible solo para usuarios suscritos (`hasPremiumAccess: true`).
- **Interacci√≥n:** Al click, abre modal para enviar mensaje de feedback (reconociendo al usuario v√≠a `uid`). Admin puede anular/anular pendiente el bot√≥n desde panel, dirigir a URL personalizada, cambiar texto (ej. "Env√≠a Feedback"), imagen/icono (br√∫jula por defecto), etc.

---

## **2. P√ÅGINA DE DIAGN√ìSTICO Y RECUPERACI√ìN (`/recuperacion`)**

*Objetivo: Guiar al usuario en p√°nico con empat√≠a y claridad, sin promesas falsas.*

### **Metaetiquetas SEO**

- **Espa√±ol:**
  - `title`: Diagn√≥stico y Recuperaci√≥n de Criptomonedas | Br√∫jula Cripto
  - `description`: Recupera el acceso a tus wallets y activos cripto de forma segura. Nuestro diagn√≥stico interactivo te gu√≠a paso a paso.
- **Ingl√©s:**
  - `title`: Cryptocurrency Diagnosis & Recovery | Crypto Compass
  - `description`: Recover access to your crypto wallets and assets safely. Our interactive diagnosis guides you step by step.

### **Secci√≥n 1: Banner de Diagn√≥stico (`DiagnosisBanner.tsx`)**

- **Imagen de Fondo:**
  - **Ruta:** `/public/images/recovery/banner-diagnosis.webp`
  - **Tama√±o:** 1920x600px
  - **Prompt para generar imagen:** "Calm, reassuring scene of a digital compass pointing to a locked vault opening, soft blue tones, motivational tech vibe."
- **Contenido (ES):**
  - **T√≠tulo (H1):** `Tranquilo, Estamos Aqu√≠ para Ayudarte.`
  - **Subt√≠tulo:** `Responde a unas preguntas simples y te guiaremos a la soluci√≥n adecuada.`
- **Contenido (EN):**
  - **Title (H1):** `Stay Calm, We're Here to Help.`
  - **Subtitle:** `Answer a few simple questions and we'll guide you to the right solution.`

### **Secci√≥n 2: Diagn√≥stico Interactivo (`RecoveryWizard.tsx`)**

- **Estructura:** Una serie de tarjetas clicables con preguntas comunes.
- **Tarjeta 1 (ES):** `He perdido mi contrase√±a o seed phrase` (enlaza a `/recuperacion/password`).
- **Tarjeta 1 (EN):** `I've lost my password or seed phrase` (links to `/en/recovery/password`).
- **Tarjeta 2 (ES):** `Necesito ayuda con la seguridad de mi wallet` (enlaza a `/seguridad`).
- **Tarjeta 2 (EN):** `I need help with my wallet security` (links to `/en/security`).
- **Tarjeta 3 (ES):** `Quiero un servicio profesional` (enlaza a `/herramientas/servicios`).
- **Tarjeta 3 (EN):** `I want a professional service` (links to `/en/tools/services`).
- **Tarjeta 4 (ES):** `Necesito rastrear una transacci√≥n` (enlaza a `/herramientas/tracker`).
- **Tarjeta 4 (EN):** `I need to track a transaction` (links to `/en/tools/tracker`).

---

## **3. P√ÅGINA DE SUSCRIPCI√ìN (`/suscripcion`)**

*Objetivo: Comunicar el inmenso valor del plan Premium de forma clara y directa, demostrando diferencias con competidores a trav√©s de comparaciones interactivas y num√©ricas.*

### **Metaetiquetas SEO**

- **Espa√±ol:**
  - `title`: Planes y Precios | Br√∫jula Cripto
  - `description`: Desbloquea el an√°lisis de riesgos en tiempo real y herramientas ilimitadas con Br√∫jula Cripto Premium. Protege tus activos como un profesional.
- **Ingl√©s:**
  - `title`: Plans & Pricing | Crypto Compass
  - `description`: Unlock real-time risk analysis and unlimited tools with Crypto Compass Premium. Protect your assets like a professional.

### **Secci√≥n 1: Cabecera**

- **Contenido (ES):**
  - **T√≠tulo (H1):** `Invierte en tu Tranquilidad.`
  - **Subt√≠tulo:** `Nuestras herramientas gratuitas te ayudan. Nuestra suscripci√≥n Premium te protege con privacidad total, un ecosistema completo y control absoluto‚Äîmejor que cualquier competidor.`
- **Contenido (EN):**
  - **Title (H1):** `Invest in Your Peace of Mind.`
  - **Subtitle:** `Our free tools help you. Our Premium subscription protects you with total privacy, a complete ecosystem, and full control‚Äîbetter than any competitor.`

### **Secci√≥n 2: Tabla de Precios (`PricingPage.tsx`)**

*Dos columnas lado a lado, destacando la opci√≥n Premium.*

- **Columna 1: Gratuito**
  - **Precio (ES/EN):** `0‚Ç¨ / Siempre` | `$0 / Forever`
  - **Caracter√≠sticas:** `Diagn√≥stico Interactivo`, `Blog y Gu√≠as`, `Recuperaci√≥n de Contrase√±a (Limitada)`, `Chatbot (Limitado)`.
- **Columna 2: Premium (con un borde resaltado)**
  - **Precio:** `[Precio] ‚Ç¨ / pago √∫nico` (o mensual, seg√∫n se defina)
  - **Bot√≥n (ES/EN):** `Obtener Premium` | `Get Premium`
  - **Caracter√≠sticas:**
    - `‚úÖ Todo lo del plan Gratuito, y adem√°s:`
    - `üöÄ **M√°xima Potencia** en Recuperaci√≥n de Contrase√±a`
    - `ü§ñ **Chatbot Ilimitado** con An√°lisis de Wallet`
    - `üõ°Ô∏è **An√°lisis de Riesgos de Seguridad en Tiempo Real**`
    - `üìà **Rastreo de Transacciones Avanzado**`
    - `‚≠ê **Soporte Prioritario**`

### **Secci√≥n 3: Descargo de Responsabilidad del Pago**

*Texto legal claro y visible debajo de la tabla de precios.*

- **Contenido (ES):** `Al suscribirte, aceptas nuestros [T√©rminos y Condiciones](/legal/terminos) y confirmas que entiendes nuestro [Descargo de Responsabilidad](/legal/descargo-responsabilidad). El pago desbloquea el acceso completo a nuestras herramientas de software sin garant√≠a expl√≠cita de √©xito en la recuperaci√≥n de activos.`
- **Contenido (EN):** `By subscribing, you agree to our [Terms and Conditions](/en/legal/terms) and confirm you understand our [Disclaimer](/en/legal/disclaimer). Payment unlocks full access to our software tools with no explicit guarantee of success in asset recovery.`

### **Secci√≥n 4: Diferencias Interactivas con Competidores (`CompetitorComparison.tsx`)**

- **Estructura:** Secci√≥n interactiva con tabs para comparar aspectos clave (privacidad, ecosistema, facilidad, modelo de precios). Incluye calculadora integrada: Usuario ingresa monto a recuperar (ej. 500‚Ç¨), herramienta calcula y muestra num√©ricamente 20% de competidores (100‚Ç¨) vs costo fijo/hora de Br√∫jula (10-20‚Ç¨ para casos peque√±os), demostrando ahorros concretos. Textos enfatizan no solo por qu√© somos mejores (privacidad total en navegador vs env√≠o de datos riesgosos; ecosistema completo con diagn√≥stico/IA/gu√≠as vs solo fuerza bruta; inicio en minutos vs tr√°mites/d√≠as; control real-time vs caja negra), sino que lo demuestran con n√∫meros: "Para 500‚Ç¨ recuperados, pagas 100‚Ç¨ (20%) con competidores vs 10‚Ç¨ con nosotros‚Äîahorras 90‚Ç¨ mientras mantienes privacidad absoluta."

## 4. Mejoras Implementadas para Robustez y Producci√≥n 2025

### **A. Optimizaci√≥n de Im√°genes para SEO**

- **Descripci√≥n:** En todas las im√°genes (ej. `banner-hero.webp`), aplicar compresi√≥n autom√°tica con Sharp en build-time de Next.js, y soporte para AVIF via `next/image`. A√±adir en rutas: `format: 'avif'` para mejora de carga.

### **B. M√©tricas de Engagement**

- **Descripci√≥n:** Integrar Google Analytics en todas las p√°ginas: Usar `next/script` para cargar GA4, rastreando tasas de rebote, clics en CTAs y enlaces legales. Configurar eventos en botones como "Obtener Premium".

### **C. Equilibrio Atractivo/Transparencia**

- **Descripci√≥n:** En Secci√≥n 3, implementar A/B testing para texto de descargo: Versi√≥n breve "Acepto t√©rminos sin garant√≠a de √©xito" vs original. Usar Vercel para variants y medir conversi√≥n.

### **D. Adaptaci√≥n a Pago por Horas**

- **Descripci√≥n:** En Secci√≥n 2, cambiar a "Planes por Hora": Columna Gratuito (15min herramientas, 30min chatbot), Columna Paquetes (horas comprables). En Secci√≥n 4, actualizar calculadora: Inputs monto/horas, coste escalonado (4.99‚Ç¨/h primeras 2, 3.99‚Ç¨/h siguientes) vs 20% competencia.
</DOCUMENT>

</DOCUMENT>
