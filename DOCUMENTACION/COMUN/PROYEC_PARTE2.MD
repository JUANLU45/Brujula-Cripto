# ğŸŸ¦ PROYECTO: BrÃºjula Cripto - Plan de Desarrollo del Frontend (VERSIÃ“N FINAL DE PRODUCCIÃ“N)

## 1. Stack TecnolÃ³gico y Dependencias Verificadas
- **Framework:** Next.js 14+ (con App Router)
- **Lenguaje:** TypeScript (`strict` mode)
- **Estilos:** Tailwind CSS
- **InternacionalizaciÃ³n (i18n):** `next-intl` (EstÃ¡ndar para App Router)
- **Temas (Claro/Oscuro):** `next-themes`
- **Almacenamiento de Archivos:** Firebase Storage
- **Editor de Contenido:** TipTap
- **Pagos:** Stripe SDK
- **Hosting:** Firebase App Hosting
- **Formularios:** React Hook Form + Zod
- **Calidad de CÃ³digo:** ESLint, Prettier
- **Testing:** Vitest, Playwright

## 2. Principios de DiseÃ±o
- **Mobile-First:** Todos los componentes se diseÃ±arÃ¡n y construirÃ¡n pensando primero en la experiencia mÃ³vil, y luego se adaptarÃ¡n a pantallas mÃ¡s grandes utilizando los breakpoints de Tailwind CSS.
- **Accesibilidad (a11y):** Se seguirÃ¡n las directrices de WCAG para asegurar que la aplicaciÃ³n sea usable por el mayor nÃºmero de personas posible.

## 3. Estructura de Carpetas y Nombres de Componentes (`packages/app`)
```
/packages/app/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ [locale]/           # Ruta dinÃ¡mica para internacionalizaciÃ³n (es|en)
â”‚   â”‚   â”œâ”€â”€ (main)/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ (admin)/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ articles/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx      # Componente: ArticleDataTable.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/page.tsx # Componente: ArticleEditor.tsx
â”‚   â”‚   â”‚   â””â”€â”€ auth/page.tsx     # Componente: AdminLoginForm.tsx
â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â””â”€â”€ middleware.ts       # Middleware de next-intl para gestionar las rutas de idioma
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                 # Ãtomos: Button.tsx, Input.tsx, Card.tsx, Spinner.tsx
â”‚   â”œâ”€â”€ layout/             # Navbar.tsx, Footer.tsx, AdminSidebar.tsx
â”‚   â””â”€â”€ features/
â”‚       â”œâ”€â”€ admin/          # ArticleEditor.tsx, ArticleDataTable.tsx
â”‚       â”œâ”€â”€ recovery/       # RecoveryWizard.tsx, WasmPasswordEngine.tsx
â”‚       â”œâ”€â”€ blog/           # ArticleCard.tsx, ArticleList.tsx
â”‚       â””â”€â”€ payments/       # UpgradeButton.tsx, PricingTier.tsx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api.ts              # Central de llamadas al Backend
â”‚   â”œâ”€â”€ firebase.ts
â”‚   â”œâ”€â”€ stripe.ts
â”‚   â””â”€â”€ utils.ts
â”œâ”€â”€ i18n/                   # Archivos de traducciÃ³n
â”‚   â”œâ”€â”€ en.json
â”‚   â””â”€â”€ es.json
â””â”€â”€ ...
```

## 4. InternacionalizaciÃ³n y Temas
- **Traducciones:** Todo el texto visible en la UI se gestionarÃ¡ a travÃ©s de los archivos `en.json` y `es.json` y se cargarÃ¡ con `next-intl`.
- **Modo Claro/Oscuro:** `next-themes` gestionarÃ¡ el cambio de tema, que aplicarÃ¡ la clase `dark` al `<html>`. Tailwind CSS usarÃ¡ esta clase para aplicar los estilos oscuros (`dark:bg-gray-900`, etc.).

## 5. Panel de AdministraciÃ³n (Integrado)
- **Acceso:** Protegido por un `hook` que valida el `claim` de `admin: true` del token de Firebase Auth.
- **Editor (TipTap):** PermitirÃ¡ la subida de imÃ¡genes a **Firebase Storage** y la inserciÃ³n de enlaces de afiliado.

## 6. Estrategia de MonetizaciÃ³n (Integrada con Stripe)
- **Flujo:** La herramienta de recuperaciÃ³n tendrÃ¡ un **Nivel Gratuito** limitado. El botÃ³n "Desbloquear Potencia Total" (`UpgradeButton.tsx`) iniciarÃ¡ el flujo.
- **ImplementaciÃ³n:**
  1.  Click en `UpgradeButton.tsx` llama a `createCheckoutSession` en `lib/api.ts`.
  2.  El backend crea una sesiÃ³n de pago en Stripe.
  3.  El frontend redirige al checkout de Stripe.
  4.  Un **Webhook** en el backend escucha el evento `checkout.session.completed` de Stripe y actualiza el documento del usuario en Firestore, desbloqueando la funcionalidad.